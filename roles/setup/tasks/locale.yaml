---
- name: create timezone file
  file:
    src: "/usr/share/zoneinfo/{{ timezone }}"
    dest: /etc/localtime
    state: link

- name: set hardwareclock
  shell: hwclock --systohc --utc

- name: set locale
  locale_gen:
    name: "{{ locale }}"
    state: present

- name: locale.conf
  ansible.builtin.lineinfile:
    path: /etc/locale.conf
    line: "LANG={{ locale }}"
    create: yes

- name: keymap
  ansible.builtin.lineinfile:
    path: /etc/vconsole.conf
    line: "KEYMAP={{ keymap }}"
    create: yes